<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IELTS Listening ‚Äì Section 1</title>

<script src="questions.js"></script>

<style>
    body {
        font-family: Arial, sans-serif;
        max-width: 760px;
        margin: auto;
        padding: 25px;
        line-height: 1.6;
    }

    h1 {
        font-size: 24px;
        font-weight: bold;
        text-align: center;
    }

    .inst-block {
        background: #f7f7f7;
        border-left: 4px solid #333;
        padding: 18px;
        margin: 20px 0;
    }

    #countdown {
        font-size: 20px;
        font-weight: bold;
        text-align: center;
        color: #d00;
        margin-top: 10px;
    }

    .question { font-weight: bold; margin-top: 18px; }

    input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-top: 6px;
        font-size: 15px;
    }

    .options { margin-left: 20px; margin-top: 6px; }

    /* ÂÖÅËÆ∏ÊòæÁ§∫Êí≠ÊîæÊù°‰ΩÜÁ¶ÅÊ≠¢ÊéßÂà∂ */
    audio {
        width: 100%;
        margin: 15px 0;
        pointer-events: none;
    }
</style>
</head>

<body>

<h1>SECTION 1 ‚Äî Questions 1‚Äì10</h1>

<!-- üîä Èü≥È¢ëÊù°ÊîæÊúÄ‰∏äÊñπÔºàÈõÖÊÄùÂÆòÊñπ‰ΩçÁΩÆÔºâ -->
<audio id="audioPlayer" preload="auto"></audio>

<!-- üî• ÂÄíËÆ°Êó∂ÊòæÁ§∫Âú®Èü≥È¢ëÁöÑÊ≠£‰∏ãÊñπÔºàÈõÖÊÄùÊúÄÁúüÂÆûÂ∏ÉÂ±ÄÔºâ -->
<div id="countdown">Section 1 will begin in 10 seconds‚Ä¶</div>

<!-- ÈõÖÊÄùÊåá‰ª§ -->
<div class="inst-block">
    <p><strong>You now have some time to look at Questions 1‚Äì10.</strong></p>
</div>

<div class="inst-block">
    <strong>Questions 1‚Äì6</strong><br>
    Write <strong>NO MORE THAN TWO WORDS AND/OR A NUMBER</strong> for each answer.
</div>

<form id="testForm"></form>

<script>
/* ----------------------------
   ËΩΩÂÖ•È¢òÂ∫ì
----------------------------- */
const sectionData = window.PREMIUM_TEST1.section1;
const form = document.getElementById("testForm");

/* Ê∏≤ÊüìÈ¢òÁõÆ */
sectionData.questions.forEach((q) => {
    if (q.number === 7) {
        form.innerHTML += `
            <div class="inst-block">
                <strong>Questions 7‚Äì10</strong><br>
                Choose the correct letter <strong>A, B or C</strong>.
            </div>
        `;
    }

    let html = `<div class="question">${q.number}. ${q.question}</div>`;

    if (q.type === "blank") {
        html += `<input type="text" id="q${q.number}" />`;
    }

    if (q.type === "mcq") {
        html += `<div class="options">`;
        q.options.forEach((opt, index) => {
            html += `
                <label>
                    <input type="radio" name="q${q.number}" value="${opt}">
                    ${String.fromCharCode(65 + index)}. ${opt}
                </label><br>
            `;
        });
        html += `</div>`;
    }

    form.innerHTML += html;
});

/* ----------------------------
   ËÆæÁΩÆÈü≥È¢ëÔºàÂÖÅËÆ∏ autoplayÔºâ
----------------------------- */
const audio = document.getElementById("audioPlayer");
audio.src = sectionData.audio;

/* ‚≠ê ÂøÖÈ°ªËÆæÁΩÆ muted ÁÑ∂ÂêéÂÜçÂèñÊ∂à muted ÊâçËÉΩËß¶ÂèëËá™Âä®Êí≠Êîæ */
audio.muted = true;

/* ----------------------------
   ÂÄíËÆ°Êó∂ÈÄªËæë + Ëá™Âä®Êí≠Êîæ
----------------------------- */
let count = 10;
const countdownBox = document.getElementById("countdown");

const timer = setInterval(() => {
    count--;

    if (count > 0) {
        countdownBox.textContent =
            `Section 1 will begin in ${count} seconds‚Ä¶`;
    } else {
        clearInterval(timer);
        countdownBox.style.display = "none";

        audio.play().then(() => {
            audio.muted = false;   // ‚≠ê ÂºÄÂßãÊí≠ÊîæÂêéÁ´ãÂç≥ÊÅ¢Â§çÂ£∞Èü≥
        }).catch(err => {
            console.log("Autoplay blocked, waiting for user click.", err);
        });
    }
}, 1000);

/* ----------------------------
   Èü≥È¢ëÁªìÊùüÊó∂Ëá™Âä®Ë∑≥ËΩ¨ Section 2
----------------------------- */
audio.addEventListener("ended", () => {
    window.location.href = "section2.html?section=2";
});
</script>

</body>
</html>
